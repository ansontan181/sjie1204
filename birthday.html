<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚âœ¨</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
<style>
  :root{ --bg:#0c0f1a; --txt:#eef2ff; --gold:#ffd166; }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0; color:var(--txt);
    background: radial-gradient(900px 600px at 20% 10%, #2a2f6d40, transparent 60%), linear-gradient(180deg,#0b1024,#090b17 70%, #0c0f1a);
    min-height:100svh; overflow:hidden; font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Microsoft YaHei, sans-serif;
  }
  #fw{position:fixed; inset:0; z-index:0; width:100vw; height:100dvh}
  .content{position:relative; z-index:2; min-height:100dvh; display:grid; place-items:center; padding: clamp(16px, 4vw, 40px)}
  .card{
    text-align:center; width:min(820px, 94vw); padding: clamp(20px, 5vw, 36px); border-radius:24px; backdrop-filter: blur(10px);
    background: linear-gradient(180deg, #ffffff12, #ffffff08); border: 1px solid #ffffff1a; box-shadow: 0 16px 44px #000a, inset 0 1px 0 #fff1;
  }
  .date{ font-size: clamp(12px, 3.2vw, 14px); letter-spacing:.18em; opacity:.75; margin-bottom:6px}
  h1{ font-weight:800; font-size: clamp(26px, 8vw, 42px); margin:4px 0 6px }
  .scribble{font-family:"Zhi Mang Xing", cursive; font-size: clamp(22px, 7.2vw, 38px); color:#ffd6a5; margin:6px 0 10px}
  p{margin:0 auto 14px; line-height:1.7; font-size: clamp(14px, 4vw, 17px); max-width:62ch; opacity:.95}
  .chips{display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:6px}
  .chip{padding:8px 12px; border-radius:999px; font-weight:700; font-size: clamp(12px,3.6vw,14px); background:#ffffff1a; border:1px solid #ffffff22}
  .actions{margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
  .btn{
    appearance:none; border:0; cursor:pointer; padding:12px 16px; border-radius:14px; font-weight:800; letter-spacing:.4px; font-size: clamp(14px, 4.4vw, 16px);
    background: linear-gradient(180deg, var(--gold), #ffb703); color:#3c2a00; box-shadow: 0 10px 22px #ffb70344, inset 0 -2px 0 #c98d00;
  }
  /* è§†é¢‘å¼¹å±‚ */
  .video-overlay{ position:fixed; inset:0; z-index:99; display:none; align-items:center; justify-content:center; background:#000;}
  .video-overlay.show{ display:flex; }
  .video-wrap{ position:relative; width:100vw; height:100dvh; display:flex; align-items:center; justify-content:center; }
  .video-wrap video{ max-width:100vw; max-height:100dvh; width:100vw; height:auto; object-fit:contain; background:#000; }
  .close-btn{
    position:fixed; top:12px; right:12px; z-index:100;
    padding:10px 14px; border-radius:12px; border:0; font-weight:900; font-size:14px; cursor:pointer;
    background: linear-gradient(180deg,#fff,#eaeaea); color:#111; box-shadow:0 10px 20px #0005, inset 0 -2px 0 #ccc;
  }
</style>
</head>
<body>
  <!-- å…ˆæ¸²æŸ“ç»“æ„ï¼Œé˜²æ­¢ç™½å± -->
  <canvas id="fw"></canvas>
  <div class="content">
    <div class="card">
      <div class="date">2025 Â· 12 Â· 04</div>
      <h1>ç”Ÿæ—¥å¿«ä¹ï¼Œæ€æ·ï¼ğŸ‰</h1>
      <div class="scribble">æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…</div>
      <p>ä»Šå¤©å±äºä½ ï¼šæ„¿æ–°çš„ä¸€å²ï¼Œæ‰€å¿µçš†å¦‚æ„¿ï¼Œæ‰€è¡ŒåŒ–å¦é€”ã€‚æ„¿ä½ çœ¼é‡Œæ€»æœ‰å…‰ã€å¿ƒä¸­æ€»æœ‰çˆ±ï¼Œæƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€ã€‚</p>
      <div class="chips">
        <div class="chip">ğŸ‚ Happy Birthday</div>
        <div class="chip">ğŸˆ æ°¸è¿œçƒ­çˆ±</div>
        <div class="chip">âœ¨ å¿ƒæƒ³äº‹æˆ</div>
        <div class="chip">ğŸ’ å¥åº·å¹³å®‰</div>
      </div>
      <div class="actions">
        <button class="btn" id="replay">å†æ”¾ä¸€æ³¢çƒŸèŠ±</button>
        <button class="btn" id="cakeBtn">ğŸ° è›‹ç³•</button>
      </div>
    </div>
  </div>

  <!-- åª’ä½“èµ„æºï¼ˆåŠ  v=highfix è§„é¿ç¼“å­˜ï¼‰ -->
  <audio id="bgm" src="1.mp3?v=highfix" preload="auto" autoplay loop></audio>
  <div class="video-overlay" id="videoOverlay" role="dialog" aria-label="è›‹ç³•è§†é¢‘">
    <button class="close-btn" id="closeVideo">å…³é—­ âœ•</button>
    <div class="video-wrap">
      <video id="cakeVideo" src="2.mp4?v=highfix" playsinline webkit-playsinline controls preload="auto"></video>
    </div>
  </div>

<script>
/* ========== æ‰€æœ‰ JS éƒ½åŒ… try/catchï¼Œé˜²æ­¢ç™½å± ========== */
try{
  // ç”»å¸ƒå°ºå¯¸
  const cvs = document.getElementById('fw'), ctx = cvs.getContext('2d');
  function fit(){
    const h = Math.max(window.innerHeight, window.visualViewport ? window.visualViewport.height : window.innerHeight);
    cvs.width = window.innerWidth; cvs.height = h;
  }
  addEventListener('resize', fit, {passive:true}); fit();
  let W=cvs.width, H=cvs.height;
  addEventListener('resize', ()=>{ W=cvs.width; H=cvs.height; }, {passive:true});

  // å·¥å…·ä¸çŠ¶æ€
  const rnd=(a,b)=>a+Math.random()*(b-a);
  const hsv=(h,s,v)=>{ let f=(n,k=(n+h/60)%6)=>v-v*s*Math.max(Math.min(k,4-k,1),0); return [f(5)*255,f(3)*255,f(1)*255]; };
  const rockets=[], particles=[], G=0.06, DRAG=0.985;

  function spawnRocket(x=rnd(W*0.25, W*0.75)){
    rockets.push({ x, y:H+12, vx:rnd(-0.7,0.7), vy:rnd(-12.5,-10.2), hue:rnd(0,360), bloom:rnd(140,220) });
  }
  function explode(x,y,hue,n){
    for(let i=0;i<n;i++){
      const a=Math.random()*Math.PI*2, s=Math.pow(Math.random(),0.25)*rnd(2.2,6.6);
      const [r,g,b]=hsv(hue+rnd(-14,14), .82, 1);
      particles.push({ x,y, vx:Math.cos(a)*s, vy:Math.sin(a)*s, life:rnd(70,120), age:0, r,g,b });
    }
  }
  function loop(){
    ctx.globalCompositeOperation='destination-out';
    ctx.fillStyle='rgba(0,0,0,0.22)'; ctx.fillRect(0,0,W,H);
    ctx.globalCompositeOperation='lighter';
    // ç«ç®­ï¼šæ›´é«˜çˆ†ï¼ˆ12%~22%ï¼‰
    for(let i=rockets.length-1;i>=0;i--){
      const r=rockets[i];
      r.x+=r.vx; r.y+=r.vy; r.vy+=G*0.40;
      ctx.fillStyle='rgba(255,255,255,.75)'; ctx.fillRect(r.x, r.y, 2, 2);
      if(r.vy>-0.8 || r.y < H * rnd(0.12, 0.22)){ explode(r.x, r.y, r.hue, r.bloom); rockets.splice(i,1); }
    }
    // ç²’å­
    for(let i=particles.length-1;i>=0;i--){
      const p=particles[i];
      p.vx*=DRAG; p.vy=p.vy*DRAG+G; p.x+=p.vx; p.y+=p.vy; p.age++;
      const a=Math.max(0,1 - p.age/p.life);
      ctx.fillStyle=`rgba(${p.r|0},${p.g|0},${p.b|0},${a})`;
      ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill();
      if(p.age>p.life || p.y>H+16) particles.splice(i,1);
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  // æ‰“å¼€å°±æœ‰çƒŸèŠ± + æŒç»­å‘å°„
  for(let i=0;i<4;i++) setTimeout(()=>spawnRocket(rnd(W*0.3,W*0.7)), i*180);
  setInterval(()=>spawnRocket(), 900);

  // äº¤äº’
  addEventListener('pointerdown', e=>{ for(let i=0;i<2;i++) spawnRocket(e.clientX); });
  const replayBtn=document.getElementById('replay');
  if(replayBtn){ replayBtn.addEventListener('click', ()=>{ for(let i=0;i<6;i++) setTimeout(()=>spawnRocket(), i*140); }); }

}catch(err){ console.error('Fireworks error:', err); }

try{
  // éŸ³ä¹ï¼šä» index.html è¿›æ¥æ›´ç¨³ï¼›åŠ  v é¿ç¼“å­˜
  const audio = document.getElementById('bgm');
  const qs = new URLSearchParams(location.search);
  if(qs.get('play')==='1'){
    const play=()=>audio && audio.play().catch(()=>{});
    setTimeout(play,0);
    addEventListener('pointerdown',play,{once:true});
    addEventListener('visibilitychange',()=>{ if(!document.hidden) play(); });
  }
}catch(err){ console.error('Audio error:', err); }

try{
  // è›‹ç³•è§†é¢‘å¼¹å±‚
  const cakeBtn=document.getElementById('cakeBtn');
  const overlay=document.getElementById('videoOverlay');
  const cakeVideo=document.getElementById('cakeVideo');
  const closeVideo=document.getElementById('closeVideo');
  if(cakeBtn && overlay && cakeVideo && closeVideo){
    cakeBtn.addEventListener('click', async () => {
      overlay.classList.add('show');
      try{ document.getElementById('bgm').pause(); }catch(e){}
      try{ await cakeVideo.play(); }catch(e){}
    });
    closeVideo.addEventListener('click', () => {
      try{ cakeVideo.pause(); cakeVideo.currentTime=0; }catch(e){}
      overlay.classList.remove('show');
      setTimeout(()=>{ try{ document.getElementById('bgm').play(); }catch(e){} }, 50);
    });
    cakeVideo.addEventListener('ended', () => {
      overlay.classList.remove('show');
      setTimeout(()=>{ try{ document.getElementById('bgm').play(); }catch(e){} }, 50);
    });
    overlay.addEventListener('click', (e)=>{ if(e.target===overlay) closeVideo.click(); });
  }
}catch(err){ console.error('Video overlay error:', err); }
</script>
</body>
</html>
